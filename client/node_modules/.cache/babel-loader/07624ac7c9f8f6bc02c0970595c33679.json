{"ast":null,"code":"var _jsxFileName = \"/Users/hwang-inseon/Desktop/portfolio/mucvies/client/src/components/Search/index.jsx\",\n    _s = $RefreshSig$();\n\nimport { useCallback, useEffect, useState } from \"react\";\nimport axios from \"axios\";\nimport SearchResult from \"../SearchResult\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst Search = () => {\n  _s();\n\n  // API로 받아온 데이터를 담을 State\n  const [movies, setMovies] = useState([]); // 검색 Input value 값을 담들 State\n\n  const [searchValue, setSearchValue] = useState(''); // Loader 관리\n\n  const [isLoading, setIsLoading] = useState(false); // API로 데이터를 받아오는 함수\n\n  const fetchData = useCallback(async () => {\n    const searchKeyword = searchValue;\n    const $resultTitle = document.querySelector('.result-title');\n    setIsLoading(true);\n    $resultTitle.innerHTML = \"\";\n\n    try {\n      if (searchKeyword === \"\") {\n        // 검색창이 비어있으면\n        setMovies([]);\n        setSearchValue('');\n      } else {\n        // '/api/search' 로 서버에 요청\n        const {\n          data\n        } = await axios.get('/api/search', {\n          params: {\n            query: searchKeyword // 검색어를 파라미터로 보낸다.\n\n          }\n        }); // 서버에서 보낸 데이터 담기\n\n        setMovies(data);\n      }\n    } catch (error) {\n      let message = 'Unknown Error';\n      if (error instanceof Error) message = error.message;\n      alert(message);\n    }\n\n    setIsLoading(false);\n  }, [searchValue]); // \"...\"의 검색 결과 << 띄우기\n\n  const resultTitle = useCallback(() => {\n    const $resultTitle = document.querySelector('.result-title');\n    $resultTitle.innerHTML = `\"${searchValue}\"의 검색 결과`;\n  }, [searchValue]);\n  const keywordChange = useCallback(e => {\n    e.preventDefault();\n    setSearchValue(e.target.value);\n  }, []);\n  const submitKeyword = useCallback(e => {\n    e.preventDefault();\n    fetchData();\n    console.log(\"제출\");\n  }, []);\n  useEffect(() => {\n    fetchData();\n  }, []);\n  return /*#__PURE__*/_jsxDEV(\"section\", {\n    className: \"search\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"search-container\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"search-form\",\n          children: /*#__PURE__*/_jsxDEV(\"form\", {\n            children: /*#__PURE__*/_jsxDEV(\"label\", {\n              htmlFor: \"name\",\n              className: \"form__label\",\n              children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"text\",\n                id: \"movie-title\",\n                className: \"form__input\",\n                name: \"movie-title\",\n                placeholder: \"\\uC601\\uD654 \\uC81C\\uBAA9\\uC744 \\uC785\\uB825\\uD574\\uC8FC\\uC138\\uC694.\",\n                required: true\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 78,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"btn-box\",\n                children: /*#__PURE__*/_jsxDEV(\"input\", {\n                  className: \"btn form__submit\",\n                  type: \"submit\",\n                  value: \"\\uAC80\\uC0C9\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 87,\n                  columnNumber: 19\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 86,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 77,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 76,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 75,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"search-result\",\n          children: [/*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"result-title\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 97,\n            columnNumber: 13\n          }, this), isLoading ? /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"fallback-message\",\n            children: \"Loading...\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 100,\n            columnNumber: 19\n          }, this) : movies && movies.map((movie, idx) => /*#__PURE__*/_jsxDEV(SearchResult, {\n            actor: movie.actor,\n            director: movie.director,\n            image: movie.image,\n            link: movie.link,\n            pubDate: movie.pubDate,\n            subtitle: movie.subtitle,\n            title: movie.title,\n            userRating: movie.userRating\n          }, idx, false, {\n            fileName: _jsxFileName,\n            lineNumber: 104,\n            columnNumber: 23\n          }, this))]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 96,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 74,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 72,\n    columnNumber: 5\n  }, this);\n};\n\n_s(Search, \"qPqHaOQxh8eviCucxwNUdKRS5vg=\");\n\n_c = Search;\nexport default Search;\n\nvar _c;\n\n$RefreshReg$(_c, \"Search\");","map":{"version":3,"names":["useCallback","useEffect","useState","axios","SearchResult","Search","movies","setMovies","searchValue","setSearchValue","isLoading","setIsLoading","fetchData","searchKeyword","$resultTitle","document","querySelector","innerHTML","data","get","params","query","error","message","Error","alert","resultTitle","keywordChange","e","preventDefault","target","value","submitKeyword","console","log","map","movie","idx","actor","director","image","link","pubDate","subtitle","title","userRating"],"sources":["/Users/hwang-inseon/Desktop/portfolio/mucvies/client/src/components/Search/index.jsx"],"sourcesContent":["import {useCallback, useEffect, useState} from \"react\";\nimport axios from \"axios\";\nimport SearchResult from \"../SearchResult\";\n\nconst Search = () => {\n  // API로 받아온 데이터를 담을 State\n  const [movies, setMovies] = useState([]);\n  // 검색 Input value 값을 담들 State\n  const [searchValue, setSearchValue] = useState('');\n  // Loader 관리\n  const [isLoading, setIsLoading] = useState(false);\n\n  // API로 데이터를 받아오는 함수\n  const fetchData = useCallback(async () => {\n    const searchKeyword = searchValue;\n    const $resultTitle = document.querySelector('.result-title');\n\n    setIsLoading(true);\n\n    $resultTitle.innerHTML = \"\";\n\n    try {\n      if (searchKeyword === \"\") {\n        // 검색창이 비어있으면\n        setMovies([]);\n        setSearchValue('');\n      } else {\n        // '/api/search' 로 서버에 요청\n        const { data } = await axios.get(\n          '/api/search',\n          {\n            params: {\n              query: searchKeyword, // 검색어를 파라미터로 보낸다.\n            },\n          },\n        );\n\n        // 서버에서 보낸 데이터 담기\n        setMovies(data);\n      }\n    } catch (error) {\n      let message = 'Unknown Error';\n      if (error instanceof Error) message = error.message;\n      alert(message);\n    }\n\n    setIsLoading(false);\n  }, [searchValue]);\n\n  // \"...\"의 검색 결과 << 띄우기\n  const resultTitle = useCallback(() => {\n    const $resultTitle = document.querySelector('.result-title');\n    $resultTitle.innerHTML = `\"${searchValue}\"의 검색 결과`;\n  }, [searchValue]);\n\n  const keywordChange = useCallback((e) => {\n    e.preventDefault();\n    setSearchValue(e.target.value);\n  }, []);\n\n  const submitKeyword = useCallback((e) => {\n    e.preventDefault();\n    fetchData();\n    console.log(\"제출\");\n  }, []);\n\n  useEffect(() => {\n    fetchData();\n  }, []);\n\n  return (\n    <section className=\"search\">\n      <div>\n        <div className=\"search-container\">\n          <div className=\"search-form\">\n            <form>\n              <label htmlFor=\"name\" className=\"form__label\">\n                <input\n                  type=\"text\"\n                  id=\"movie-title\"\n                  className=\"form__input\"\n                  name=\"movie-title\"\n                  placeholder=\"영화 제목을 입력해주세요.\"\n                  required\n                />\n                <div className=\"btn-box\">\n                  <input\n                    className=\"btn form__submit\"\n                    type=\"submit\"\n                    value=\"검색\"\n                  />\n                </div>\n              </label>\n            </form>\n          </div>\n          <div className=\"search-result\">\n            <p className=\"result-title\" />\n            {\n              isLoading\n                ? <div className=\"fallback-message\">Loading...</div>\n                : (\n                  movies &&\n                    movies.map((movie, idx) => (\n                      <SearchResult\n                        key={idx}\n                        actor={movie.actor}\n                        director={movie.director}\n                        image={movie.image}\n                        link={movie.link}\n                        pubDate={movie.pubDate}\n                        subtitle={movie.subtitle}\n                        title={movie.title}\n                        userRating={movie.userRating}\n                      />\n                    ))\n                )\n            }\n          </div>\n        </div>\n      </div>\n    </section>\n  );\n};\n\nexport default Search;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}