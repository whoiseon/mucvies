{"ast":null,"code":"import _regeneratorRuntime from\"/Users/hwang-inseon/Desktop/portfolio/movie-app/client/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/hwang-inseon/Desktop/portfolio/movie-app/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/hwang-inseon/Desktop/portfolio/movie-app/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useCallback,useEffect,useState}from\"react\";import axios from\"axios\";import{useRecoilState}from\"recoil\";import Stack from\"@mui/material/Stack\";import Skeleton from\"@mui/material/Skeleton\";import AppLayout from\"../../components/AppLayout\";import{BoxOfficeMovieCard,Header,SkeletonWrapper}from\"../BoxOffice/styles\";import{RankingMovieCard,RankingWrapper}from\"./styles\";import{rankingState}from\"../../states/rankingState\";import RankingCard from\"../../components/RankingCard\";import{CardWrapper,MovieImg,MovieInfo}from\"../../components/BoxOfficeCard/styles\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Ranking=function Ranking(){var _useRecoilState=useRecoilState(rankingState),_useRecoilState2=_slicedToArray(_useRecoilState,2),ranking=_useRecoilState2[0],setRanking=_useRecoilState2[1];var _useState=useState(true),_useState2=_slicedToArray(_useState,2),isLoading=_useState2[0],setIsLoading=_useState2[1];var fetchRanking=useCallback(/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var _yield$axios$get,data,message;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:setIsLoading(true);_context.prev=1;_context.next=4;return axios.get('/api/ranking');case 4:_yield$axios$get=_context.sent;data=_yield$axios$get.data;setRanking(data);setIsLoading(false);_context.next=15;break;case 10:_context.prev=10;_context.t0=_context[\"catch\"](1);message='Unknown Error';if(_context.t0 instanceof Error)message=_context.t0.message;console.log(message);case 15:case\"end\":return _context.stop();}}},_callee,null,[[1,10]]);})),[]);useEffect(function(){fetchRanking();},[]);var fakeArrayToSkeleton=Array.from({length:20},function(v,i){return i;});return/*#__PURE__*/_jsxs(AppLayout,{children:[/*#__PURE__*/_jsx(Header,{children:/*#__PURE__*/_jsx(\"span\",{children:\"\\uC608\\uB9E4 \\uC21C\\uC704\"})}),/*#__PURE__*/_jsx(RankingWrapper,{children:isLoading?/*#__PURE__*/_jsx(SkeletonWrapper,{children:/*#__PURE__*/_jsx(Stack,{spacing:1,children:/*#__PURE__*/_jsx(BoxOfficeMovieCard,{children:fakeArrayToSkeleton.map(function(v,i){return/*#__PURE__*/_jsxs(CardWrapper,{children:[/*#__PURE__*/_jsx(MovieImg,{children:/*#__PURE__*/_jsx(Skeleton,{variant:\"rounded\",width:\"100%\",height:300})}),/*#__PURE__*/_jsxs(MovieInfo,{children:[/*#__PURE__*/_jsx(\"p\",{children:/*#__PURE__*/_jsx(Skeleton,{variant:\"rounded\",width:100,height:14})}),/*#__PURE__*/_jsx(\"p\",{children:/*#__PURE__*/_jsx(Skeleton,{variant:\"rounded\",width:\"100%\",height:14})})]})]},v);})})})}):/*#__PURE__*/_jsx(RankingMovieCard,{children:ranking===null||ranking===void 0?void 0:ranking.map(function(data,i){return/*#__PURE__*/_jsx(RankingCard,{data:data},data.title);})})})]});};export default Ranking;","map":{"version":3,"names":["useCallback","useEffect","useState","axios","useRecoilState","Stack","Skeleton","AppLayout","BoxOfficeMovieCard","Header","SkeletonWrapper","RankingMovieCard","RankingWrapper","rankingState","RankingCard","CardWrapper","MovieImg","MovieInfo","Ranking","ranking","setRanking","isLoading","setIsLoading","fetchRanking","get","data","message","Error","console","log","fakeArrayToSkeleton","Array","from","length","v","i","map","title"],"sources":["/Users/hwang-inseon/Desktop/portfolio/movie-app/client/src/routes/Ranking/index.jsx"],"sourcesContent":["import {useCallback, useEffect, useState} from \"react\";\nimport axios from \"axios\";\nimport {useRecoilState} from \"recoil\";\nimport Stack from \"@mui/material/Stack\";\nimport Skeleton from \"@mui/material/Skeleton\";\nimport AppLayout from \"../../components/AppLayout\";\nimport {BoxOfficeMovieCard, Header, SkeletonWrapper} from \"../BoxOffice/styles\";\nimport {RankingMovieCard, RankingWrapper} from \"./styles\";\nimport {rankingState} from \"../../states/rankingState\";\nimport RankingCard from \"../../components/RankingCard\";\nimport {CardWrapper, MovieImg, MovieInfo} from \"../../components/BoxOfficeCard/styles\";\n\nconst Ranking = () => {\n  const [ranking, setRanking] = useRecoilState(rankingState);\n  const [isLoading, setIsLoading] = useState(true);\n\n  const fetchRanking = useCallback(async () => {\n    setIsLoading(true);\n    try {\n      const { data } = await axios.get('/api/ranking');\n      setRanking(data);\n      setIsLoading(false);\n    } catch (error) {\n      let message = 'Unknown Error';\n      if (error instanceof Error) message = error.message;\n      console.log(message);\n    }\n  }, []);\n\n  useEffect(() => {\n    fetchRanking();\n  }, []);\n\n  const fakeArrayToSkeleton = Array.from({ length: 20 }, (v, i) => i);\n\n  return (\n    <AppLayout>\n      <Header>\n        <span>\n          예매 순위\n        </span>\n      </Header>\n      <RankingWrapper>\n        {\n          isLoading\n            ? (\n              <SkeletonWrapper>\n                <Stack spacing={1}>\n                  <BoxOfficeMovieCard>\n                    {\n                      fakeArrayToSkeleton.map((v, i) => {\n                        return (\n                          <CardWrapper key={v}>\n                            <MovieImg>\n                              <Skeleton variant=\"rounded\" width=\"100%\" height={300} />\n                            </MovieImg>\n                            <MovieInfo>\n                              <p>\n                                <Skeleton variant=\"rounded\" width={100} height={14} />\n                              </p>\n                              <p>\n                                <Skeleton variant=\"rounded\" width=\"100%\" height={14} />\n                              </p>\n                            </MovieInfo>\n                          </CardWrapper>\n                        );\n                      })\n                    }\n                  </BoxOfficeMovieCard>\n                </Stack>\n              </SkeletonWrapper>\n            )\n            : (\n              <RankingMovieCard>\n                {\n                  ranking?.map((data, i) => {\n                    return (\n                      <RankingCard key={data.title} data={data} />\n                    );\n                  })\n                }\n              </RankingMovieCard>\n            )\n        }\n      </RankingWrapper>\n    </AppLayout>\n  );\n};\n\nexport default Ranking;\n"],"mappings":"obAAA,OAAQA,WAAR,CAAqBC,SAArB,CAAgCC,QAAhC,KAA+C,OAA/C,CACA,MAAOC,MAAP,KAAkB,OAAlB,CACA,OAAQC,cAAR,KAA6B,QAA7B,CACA,MAAOC,MAAP,KAAkB,qBAAlB,CACA,MAAOC,SAAP,KAAqB,wBAArB,CACA,MAAOC,UAAP,KAAsB,4BAAtB,CACA,OAAQC,kBAAR,CAA4BC,MAA5B,CAAoCC,eAApC,KAA0D,qBAA1D,CACA,OAAQC,gBAAR,CAA0BC,cAA1B,KAA+C,UAA/C,CACA,OAAQC,YAAR,KAA2B,2BAA3B,CACA,MAAOC,YAAP,KAAwB,8BAAxB,CACA,OAAQC,WAAR,CAAqBC,QAArB,CAA+BC,SAA/B,KAA+C,uCAA/C,C,wFAEA,GAAMC,QAAO,CAAG,QAAVA,QAAU,EAAM,CACpB,oBAA8Bd,cAAc,CAACS,YAAD,CAA5C,oDAAOM,OAAP,qBAAgBC,UAAhB,qBACA,cAAkClB,QAAQ,CAAC,IAAD,CAA1C,wCAAOmB,SAAP,eAAkBC,YAAlB,eAEA,GAAMC,aAAY,CAAGvB,WAAW,wEAAC,uKAC/BsB,YAAY,CAAC,IAAD,CAAZ,CAD+B,sCAGNnB,MAAK,CAACqB,GAAN,CAAU,cAAV,CAHM,uCAGrBC,IAHqB,kBAGrBA,IAHqB,CAI7BL,UAAU,CAACK,IAAD,CAAV,CACAH,YAAY,CAAC,KAAD,CAAZ,CAL6B,iFAOzBI,OAPyB,CAOf,eAPe,CAQ7B,GAAI,sBAAiBC,MAArB,CAA4BD,OAAO,CAAG,YAAMA,OAAhB,CAC5BE,OAAO,CAACC,GAAR,CAAYH,OAAZ,EAT6B,qEAAD,GAW7B,EAX6B,CAAhC,CAaAzB,SAAS,CAAC,UAAM,CACdsB,YAAY,GACb,CAFQ,CAEN,EAFM,CAAT,CAIA,GAAMO,oBAAmB,CAAGC,KAAK,CAACC,IAAN,CAAW,CAAEC,MAAM,CAAE,EAAV,CAAX,CAA2B,SAACC,CAAD,CAAIC,CAAJ,QAAUA,EAAV,EAA3B,CAA5B,CAEA,mBACE,MAAC,SAAD,yBACE,KAAC,MAAD,wBACE,mDADF,EADF,cAME,KAAC,cAAD,WAEId,SAAS,cAEL,KAAC,eAAD,wBACE,KAAC,KAAD,EAAO,OAAO,CAAE,CAAhB,uBACE,KAAC,kBAAD,WAEIS,mBAAmB,CAACM,GAApB,CAAwB,SAACF,CAAD,CAAIC,CAAJ,CAAU,CAChC,mBACE,MAAC,WAAD,yBACE,KAAC,QAAD,wBACE,KAAC,QAAD,EAAU,OAAO,CAAC,SAAlB,CAA4B,KAAK,CAAC,MAAlC,CAAyC,MAAM,CAAE,GAAjD,EADF,EADF,cAIE,MAAC,SAAD,yBACE,gCACE,KAAC,QAAD,EAAU,OAAO,CAAC,SAAlB,CAA4B,KAAK,CAAE,GAAnC,CAAwC,MAAM,CAAE,EAAhD,EADF,EADF,cAIE,gCACE,KAAC,QAAD,EAAU,OAAO,CAAC,SAAlB,CAA4B,KAAK,CAAC,MAAlC,CAAyC,MAAM,CAAE,EAAjD,EADF,EAJF,GAJF,GAAkBD,CAAlB,CADF,CAeD,CAhBD,CAFJ,EADF,EADF,EAFK,cA6BL,KAAC,gBAAD,WAEIf,OAFJ,SAEIA,OAFJ,iBAEIA,OAAO,CAAEiB,GAAT,CAAa,SAACX,IAAD,CAAOU,CAAP,CAAa,CACxB,mBACE,KAAC,WAAD,EAA8B,IAAI,CAAEV,IAApC,EAAkBA,IAAI,CAACY,KAAvB,CADF,CAGD,CAJD,CAFJ,EA/BR,EANF,GADF,CAoDD,CA3ED,CA6EA,cAAenB,QAAf"},"metadata":{},"sourceType":"module"}