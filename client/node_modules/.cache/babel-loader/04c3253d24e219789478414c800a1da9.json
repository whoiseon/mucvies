{"ast":null,"code":"import _regeneratorRuntime from\"/Users/hwang-inseon/Desktop/portfolio/movie-app/client/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/hwang-inseon/Desktop/portfolio/movie-app/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/hwang-inseon/Desktop/portfolio/movie-app/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useRecoilState}from\"recoil\";import{useCallback,useEffect,useState}from\"react\";import axios from\"axios\";import{Link,NavLink,useParams}from\"react-router-dom\";import Skeleton from'@mui/material/Skeleton';import Stack from'@mui/material/Stack';import AppLayout from\"../../components/AppLayout\";import{BoxOfficeMovieCard,BoxOfficeWrapper,Header,SkeletonWrapper}from\"./styles\";import{boxofficeState}from\"../../states/boxofficeState\";import BoxOfficeCard from\"../../components/BoxOfficeCard\";import{CardWrapper,MovieImg,MovieInfo}from\"../../components/BoxOfficeCard/styles\";import{BLUE_COLOR,WHITE_COLOR}from\"../../styles/common\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var BoxOffice=function BoxOffice(){var _useRecoilState=useRecoilState(boxofficeState),_useRecoilState2=_slicedToArray(_useRecoilState,2),boxoffice=_useRecoilState2[0],setBoxoffice=_useRecoilState2[1];var _useState=useState(true),_useState2=_slicedToArray(_useState,2),isLoading=_useState2[0],setIsLoading=_useState2[1];var params=useParams();var fetchBoxOffice=useCallback(/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var _yield$axios$get,data,message;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:setIsLoading(true);_context.prev=1;_context.next=4;return axios.get('/api/boxoffice',{params:{period:params.period}});case 4:_yield$axios$get=_context.sent;data=_yield$axios$get.data;setBoxoffice(data);setIsLoading(false);_context.next=15;break;case 10:_context.prev=10;_context.t0=_context[\"catch\"](1);message='Unknown Error';if(_context.t0 instanceof Error)message=_context.t0.message;console.log(message);case 15:case\"end\":return _context.stop();}}},_callee,null,[[1,10]]);})),[params.period]);console.log(process.env.REACT_APP_DB_HOST);useEffect(function(){fetchBoxOffice();},[params.period]);var fakeArrayToSkeleton=Array.from({length:15},function(v,i){return i;});var activeButton={backgroundColor:\"\".concat(BLUE_COLOR),color:\"\".concat(WHITE_COLOR)};return/*#__PURE__*/_jsxs(AppLayout,{children:[/*#__PURE__*/_jsxs(Header,{children:[/*#__PURE__*/_jsx(\"span\",{children:\"\\uBC15\\uC2A4\\uC624\\uD53C\\uC2A4\"}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(NavLink,{to:\"/boxoffice/weekly\",style:function style(_ref2){var isActive=_ref2.isActive;return isActive?activeButton:{};},children:/*#__PURE__*/_jsx(\"span\",{children:\"\\uC8FC\\uAC04\"})}),/*#__PURE__*/_jsx(NavLink,{to:\"/boxoffice/monthly\",style:function style(_ref3){var isActive=_ref3.isActive;return isActive?activeButton:{};},children:/*#__PURE__*/_jsx(\"span\",{children:\"\\uC6D4\\uAC04\"})}),/*#__PURE__*/_jsx(NavLink,{to:\"/boxoffice/yearly\",style:function style(_ref4){var isActive=_ref4.isActive;return isActive?activeButton:{};},children:/*#__PURE__*/_jsx(\"span\",{children:\"\\uB144\\uAC04\"})})]})]}),/*#__PURE__*/_jsx(BoxOfficeWrapper,{children:isLoading?/*#__PURE__*/_jsx(SkeletonWrapper,{children:/*#__PURE__*/_jsx(Stack,{spacing:1,children:/*#__PURE__*/_jsx(BoxOfficeMovieCard,{children:fakeArrayToSkeleton.map(function(v,i){return/*#__PURE__*/_jsxs(CardWrapper,{children:[/*#__PURE__*/_jsx(MovieImg,{children:/*#__PURE__*/_jsx(Skeleton,{variant:\"rounded\",width:\"100%\",height:300})}),/*#__PURE__*/_jsxs(MovieInfo,{children:[/*#__PURE__*/_jsx(\"p\",{children:/*#__PURE__*/_jsx(Skeleton,{variant:\"rounded\",width:100,height:14})}),/*#__PURE__*/_jsx(\"p\",{children:/*#__PURE__*/_jsx(Skeleton,{variant:\"rounded\",width:\"100%\",height:14})})]})]},v);})})})}):/*#__PURE__*/_jsx(BoxOfficeMovieCard,{children:boxoffice===null||boxoffice===void 0?void 0:boxoffice.map(function(data,i){return/*#__PURE__*/_jsx(BoxOfficeCard,{data:data},data.title);})})})]});};export default BoxOffice;","map":{"version":3,"names":["useRecoilState","useCallback","useEffect","useState","axios","Link","NavLink","useParams","Skeleton","Stack","AppLayout","BoxOfficeMovieCard","BoxOfficeWrapper","Header","SkeletonWrapper","boxofficeState","BoxOfficeCard","CardWrapper","MovieImg","MovieInfo","BLUE_COLOR","WHITE_COLOR","BoxOffice","boxoffice","setBoxoffice","isLoading","setIsLoading","params","fetchBoxOffice","get","period","data","message","Error","console","log","process","env","REACT_APP_DB_HOST","fakeArrayToSkeleton","Array","from","length","v","i","activeButton","backgroundColor","color","isActive","map","title"],"sources":["/Users/hwang-inseon/Desktop/portfolio/movie-app/client/src/routes/BoxOffice/index.jsx"],"sourcesContent":["import {useRecoilState} from \"recoil\";\nimport {useCallback, useEffect, useState} from \"react\";\nimport axios from \"axios\";\nimport {Link, NavLink, useParams} from \"react-router-dom\";\nimport Skeleton from '@mui/material/Skeleton';\nimport Stack from '@mui/material/Stack';\nimport AppLayout from \"../../components/AppLayout\";\nimport {BoxOfficeMovieCard, BoxOfficeWrapper, Header, SkeletonWrapper} from \"./styles\";\nimport {boxofficeState} from \"../../states/boxofficeState\";\nimport BoxOfficeCard from \"../../components/BoxOfficeCard\";\nimport {CardWrapper, MovieImg, MovieInfo} from \"../../components/BoxOfficeCard/styles\";\nimport {BLUE_COLOR, WHITE_COLOR} from \"../../styles/common\";\n\nconst BoxOffice = () => {\n  const [boxoffice, setBoxoffice] = useRecoilState(boxofficeState);\n  const [isLoading, setIsLoading] = useState(true);\n  const params = useParams();\n\n  const fetchBoxOffice = useCallback(async () => {\n    setIsLoading(true);\n    try {\n      const { data } = await axios.get('/api/boxoffice', {\n        params: {\n          period: params.period,\n        },\n      });\n      setBoxoffice(data);\n      setIsLoading(false);\n    } catch (error) {\n      let message = 'Unknown Error';\n      if (error instanceof Error) message = error.message;\n      console.log(message);\n    }\n  }, [params.period]);\n\n  console.log(process.env.REACT_APP_DB_HOST);\n\n  useEffect(() => {\n    fetchBoxOffice();\n  }, [params.period]);\n\n  const fakeArrayToSkeleton = Array.from({ length: 15 }, (v, i) => i);\n\n  const activeButton = {\n    backgroundColor: `${BLUE_COLOR}`,\n    color: `${WHITE_COLOR}`,\n  };\n\n  return (\n    <AppLayout>\n      <Header>\n        <span>\n          박스오피스\n        </span>\n        <div>\n          <NavLink\n            to=\"/boxoffice/weekly\"\n            style={({ isActive }) => (isActive ? activeButton : {})}\n          >\n            <span>주간</span>\n          </NavLink>\n          <NavLink\n            to=\"/boxoffice/monthly\"\n            style={({ isActive }) => (isActive ? activeButton : {})}\n          >\n            <span>월간</span>\n          </NavLink>\n          <NavLink\n            to=\"/boxoffice/yearly\"\n            style={({ isActive }) => (isActive ? activeButton : {})}\n          >\n            <span>년간</span>\n          </NavLink>\n        </div>\n      </Header>\n      <BoxOfficeWrapper>\n        {\n          isLoading\n            ? (\n              <SkeletonWrapper>\n                <Stack spacing={1}>\n                  <BoxOfficeMovieCard>\n                    {\n                    fakeArrayToSkeleton.map((v, i) => {\n                      return (\n                        <CardWrapper key={v}>\n                          <MovieImg>\n                            <Skeleton variant=\"rounded\" width=\"100%\" height={300} />\n                          </MovieImg>\n                          <MovieInfo>\n                            <p>\n                              <Skeleton variant=\"rounded\" width={100} height={14} />\n                            </p>\n                            <p>\n                              <Skeleton variant=\"rounded\" width=\"100%\" height={14} />\n                            </p>\n                          </MovieInfo>\n                        </CardWrapper>\n                      );\n                    })\n                  }\n                  </BoxOfficeMovieCard>\n                </Stack>\n              </SkeletonWrapper>\n            )\n            : (\n              <BoxOfficeMovieCard>\n                {\n                  boxoffice?.map((data, i) => {\n                    return (\n                      <BoxOfficeCard key={data.title} data={data} />\n                    );\n                  })\n                }\n              </BoxOfficeMovieCard>\n            )\n        }\n      </BoxOfficeWrapper>\n    </AppLayout>\n  );\n};\n\nexport default BoxOffice;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}