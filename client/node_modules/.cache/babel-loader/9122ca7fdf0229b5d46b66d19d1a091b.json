{"ast":null,"code":"var _jsxFileName = \"/Users/hwang-inseon/Desktop/portfolio/movie-app/client/src/components/SearchForm/index.jsx\",\n    _s = $RefreshSig$();\n\nimport { memo, useState, useCallback, useEffect } from \"react\";\nimport SearchIcon from \"@mui/icons-material/Search\";\nimport axios from \"axios\";\nimport { useRecoilState, useRecoilValue } from \"recoil\";\nimport { useQuery } from \"react-query\";\nimport { Header, InputWrapper, SearchButtonWrapper, SearchFormWrapper, SearchOptionWrapper } from \"../../routes/Search/styles\";\nimport { searchKeywordState } from \"../../states/searchKeywordState\";\nimport OptionButton from \"../OptionButton\";\nimport { genreListState, countryListState, genreState, countryState } from \"../../states/optionListState\";\nimport ErrorBubble from \"../ErrorBubble\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst SearchForm = _ref => {\n  _s();\n\n  let {\n    setMovies,\n    setKeyword,\n    setIsLoading,\n    setDefaultView\n  } = _ref;\n  const genreList = useRecoilValue(genreListState);\n  const countryList = useRecoilValue(countryListState);\n  const [value, setValue] = useRecoilState(searchKeywordState);\n  const [genre, setGenre] = useRecoilState(genreState);\n  const [country, setCountry] = useRecoilState(countryState);\n  const [errorBubble, setErrorBubble] = useState(false);\n  const [focus, setFocus] = useState(false);\n  const getSearchResult = useCallback(async () => {\n    const {\n      data\n    } = await axios.get('/api/search', {\n      params: {\n        query: value,\n        genre,\n        country\n      }\n    });\n    return data;\n  }, [value, genre, country]);\n  const onSubmitSearch = useCallback(async e => {\n    e.preventDefault();\n    setIsLoading(true);\n    setDefaultView(false);\n\n    try {\n      if (value === '') {\n        setMovies([]);\n        setValue('');\n        setErrorBubble(true);\n        setTimeout(() => {\n          setErrorBubble(false);\n        }, 3000);\n      } else {\n        const {\n          data\n        } = await axios.get('/api/search', {\n          params: {\n            query: value,\n            genre,\n            country\n          }\n        });\n        setIsLoading(false);\n        setKeyword(value);\n        setMovies(data);\n      }\n    } catch (error) {\n      setIsLoading(false);\n      console.error(error);\n    }\n  }, [value, genre, country]);\n  const onChangeValue = useCallback(async e => {\n    setFocus(true);\n    setValue(e.target.value);\n  }, []);\n  return /*#__PURE__*/_jsxDEV(SearchFormWrapper, {\n    onSubmit: onSubmitSearch,\n    children: [/*#__PURE__*/_jsxDEV(Header, {\n      children: \"\\uC601\\uD654 \\uAC80\\uC0C9\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(InputWrapper, {\n      focus: focus,\n      children: [/*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        onChange: onChangeValue,\n        placeholder: \"\\uD0A4\\uC6CC\\uB4DC\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 83,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(SearchIcon, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 88,\n        columnNumber: 9\n      }, this), errorBubble && /*#__PURE__*/_jsxDEV(ErrorBubble, {\n        content: \"\\uAC80\\uC0C9 \\uD0A4\\uC6CC\\uB4DC\\uB97C \\uC785\\uB825\\uD574\\uC8FC\\uC138\\uC694\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 89,\n        columnNumber: 26\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(SearchOptionWrapper, {\n      children: [/*#__PURE__*/_jsxDEV(OptionButton, {\n        title: \"\\uC7A5\\uB974\",\n        data: genreList,\n        setState: setGenre\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 92,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(OptionButton, {\n        title: \"\\uAD6D\\uAC00\",\n        data: countryList,\n        setState: setCountry\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 93,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(SearchButtonWrapper, {\n      children: /*#__PURE__*/_jsxDEV(\"button\", {\n        type: \"submit\",\n        children: \"\\uAC80\\uC0C9\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 96,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 95,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 78,\n    columnNumber: 5\n  }, this);\n};\n\n_s(SearchForm, \"zgTx9Bf+bPOvkmb9XmEi53LjHaQ=\", false, function () {\n  return [useRecoilValue, useRecoilValue, useRecoilState, useRecoilState, useRecoilState];\n});\n\n_c = SearchForm;\nexport default _c2 = /*#__PURE__*/memo(SearchForm);\n\nvar _c, _c2;\n\n$RefreshReg$(_c, \"SearchForm\");\n$RefreshReg$(_c2, \"%default%\");","map":{"version":3,"names":["memo","useState","useCallback","useEffect","SearchIcon","axios","useRecoilState","useRecoilValue","useQuery","Header","InputWrapper","SearchButtonWrapper","SearchFormWrapper","SearchOptionWrapper","searchKeywordState","OptionButton","genreListState","countryListState","genreState","countryState","ErrorBubble","SearchForm","setMovies","setKeyword","setIsLoading","setDefaultView","genreList","countryList","value","setValue","genre","setGenre","country","setCountry","errorBubble","setErrorBubble","focus","setFocus","getSearchResult","data","get","params","query","onSubmitSearch","e","preventDefault","setTimeout","error","console","onChangeValue","target"],"sources":["/Users/hwang-inseon/Desktop/portfolio/movie-app/client/src/components/SearchForm/index.jsx"],"sourcesContent":["import {memo, useState, useCallback, useEffect} from \"react\";\nimport SearchIcon from \"@mui/icons-material/Search\";\nimport axios from \"axios\";\nimport {useRecoilState, useRecoilValue} from \"recoil\";\nimport {useQuery} from \"react-query\";\nimport {\n  Header,\n  InputWrapper,\n  SearchButtonWrapper,\n  SearchFormWrapper,\n  SearchOptionWrapper,\n} from \"../../routes/Search/styles\";\nimport {searchKeywordState} from \"../../states/searchKeywordState\";\nimport OptionButton from \"../OptionButton\";\nimport {genreListState, countryListState, genreState, countryState} from \"../../states/optionListState\";\nimport ErrorBubble from \"../ErrorBubble\";\n\nconst SearchForm = ({ setMovies, setKeyword, setIsLoading, setDefaultView }) => {\n  const genreList = useRecoilValue(genreListState);\n  const countryList = useRecoilValue(countryListState);\n\n  const [value, setValue] = useRecoilState(searchKeywordState);\n  const [genre, setGenre] = useRecoilState(genreState);\n  const [country, setCountry] = useRecoilState(countryState);\n\n  const [errorBubble, setErrorBubble] = useState(false);\n\n  const [focus, setFocus] = useState(false);\n\n  const getSearchResult = useCallback(async () => {\n    const { data } = await axios.get('/api/search', {\n      params: {\n        query: value,\n        genre,\n        country,\n      },\n    });\n\n    return data;\n  }, [value, genre, country]);\n\n  const onSubmitSearch = useCallback(async (e) => {\n    e.preventDefault();\n    setIsLoading(true);\n    setDefaultView(false);\n    try {\n      if (value === '') {\n        setMovies([]);\n        setValue('');\n        setErrorBubble(true);\n        setTimeout(() => {\n          setErrorBubble(false);\n        }, 3000);\n      } else {\n        const { data } = await axios.get('/api/search', {\n          params: {\n            query: value,\n            genre,\n            country,\n          },\n        });\n        setIsLoading(false);\n        setKeyword(value);\n        setMovies(data);\n      }\n    } catch (error) {\n      setIsLoading(false);\n      console.error(error);\n    }\n  }, [value, genre, country]);\n\n  const onChangeValue = useCallback(async (e) => {\n    setFocus(true);\n    setValue(e.target.value);\n  }, []);\n\n  return (\n    <SearchFormWrapper onSubmit={onSubmitSearch}>\n      <Header>\n        영화 검색\n      </Header>\n      <InputWrapper focus={focus}>\n        <input\n          type=\"text\"\n          onChange={onChangeValue}\n          placeholder=\"키워드\"\n        />\n        <SearchIcon />\n        { errorBubble && <ErrorBubble content=\"검색 키워드를 입력해주세요\" /> }\n      </InputWrapper>\n      <SearchOptionWrapper>\n        <OptionButton title=\"장르\" data={genreList} setState={setGenre} />\n        <OptionButton title=\"국가\" data={countryList} setState={setCountry} />\n      </SearchOptionWrapper>\n      <SearchButtonWrapper>\n        <button type=\"submit\">\n          검색\n        </button>\n      </SearchButtonWrapper>\n    </SearchFormWrapper>\n  );\n};\n\nexport default memo(SearchForm);\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}